<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>AI ChatGPT</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="container">
        <h2>ü§ñ AI ChatGPT</h2>

        <div class="chat-box" id="chatBox"></div>

        <div class="input-area">
            <input id="input" placeholder="Nh·∫≠p c√¢u h·ªèi">
            <button onclick="send()">G·ª≠i</button>
        </div>
    </div>

    <script>
        async function send() {
            const input = document.getElementById("input");
            const chatBox = document.getElementById("chatBox");
            const msg = input.value.trim();
            if (!msg) return;

            // Tin nh·∫Øn ng∆∞·ªùi d√πng
            chatBox.innerHTML += `
        <div class="msg user">${msg}</div>
    `;
            input.value = "";
            chatBox.scrollTop = chatBox.scrollHeight;

            // AI ƒëang g√µ
            const typingId = "typing";
            chatBox.innerHTML += `
        <div class="msg ai typing" id="${typingId}">AI ƒëang g√µ...</div>
    `;
            chatBox.scrollTop = chatBox.scrollHeight;

            // G·ªçi server
            let res = await fetch("http://localhost:3000/chat", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    message: msg
                })
            });

            let data = await res.json();

            // X√≥a "AI ƒëang g√µ"
            document.getElementById(typingId).remove();

            // Tin nh·∫Øn AI
            chatBox.innerHTML += `
        <div class="msg ai">${data.reply}</div>
    `;
            chatBox.scrollTop = chatBox.scrollHeight;
        }
    </script>

</body>

</html>